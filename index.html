<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>時間管理四象限</title>
    <!-- 引入 Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js"></script>
    <!-- 自定義 CSS -->
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #00796b;
            color: white;
            text-align: center;
            padding: 20px 0;
        }
        .task-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 20px;
        }
        .task-quadrant {
            width: 40%;
            min-width: 250px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        .task-quadrant h2 {
            text-align: center;
            color: #00796b;
        }
        .task-list {
            list-style: none;
            padding-left: 0;
        }
        .task-list li {
            background-color: #f1f1f1;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .task-list li button {
            background-color: red;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .task-list li button:hover {
            background-color: #d32f2f;
        }
        .task-actions {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .task-actions button {
            padding: 10px 20px;
            background-color: #00796b;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .task-actions button:hover {
            background-color: #004d40;
        }
        input[type="date"], input[type="text"] {
            padding: 10px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>時間管理四象限</h1>
    </header>

    <!-- 四象限區域 -->
    <div class="task-container">
        <div class="task-quadrant" id="quadrant-1">
            <h2>重要且緊急</h2>
            <ul class="task-list" id="tasks-quadrant-1">
                <!-- 任務列表 -->
            </ul>
        </div>
        
        <div class="task-quadrant" id="quadrant-2">
            <h2>重要但不緊急</h2>
            <ul class="task-list" id="tasks-quadrant-2">
                <!-- 任務列表 -->
            </ul>
        </div>
        
        <div class="task-quadrant" id="quadrant-3">
            <h2>不重要但緊急</h2>
            <ul class="task-list" id="tasks-quadrant-3">
                <!-- 任務列表 -->
            </ul>
        </div>
        
        <div class="task-quadrant" id="quadrant-4">
            <h2>不重要也不緊急</h2>
            <ul class="task-list" id="tasks-quadrant-4">
                <!-- 任務列表 -->
            </ul>
        </div>
    </div>

    <!-- 按鈕區域 -->
    <div class="task-actions">
        <button id="add-task-btn">新增任務</button>
        <button id="clear-all-btn">清除所有任務</button>
    </div>

    <!-- Firebase 設定與初始化 -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAHniz716ZPQPEIroyNOcbEscwWTyjZa0Q",
            authDomain: "time-6611d.firebaseapp.com",
            projectId: "time-6611d",
            storageBucket: "time-6611d.firebasestorage.app",
            messagingSenderId: "24722038287",
            appId: "1:24722038287:web:fabe1ffa81f96669b10d7a",
            measurementId: "G-0SHLTP94ZR"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const analytics = firebase.analytics();

        // 顯示任務
        function displayTasks() {
            const tasksRef = db.collection("tasks");

            tasksRef.get().then((snapshot) => {
                snapshot.forEach((doc) => {
                    const task = doc.data();
                    const taskElement = document.createElement("li");
                    taskElement.textContent = task.name;

                    const deleteButton = document.createElement("button");
                    deleteButton.textContent = "刪除";
                    deleteButton.onclick = () => deleteTask(doc.id);
                    taskElement.appendChild(deleteButton);

                    // 根據象限顯示任務
                    document.getElementById(`tasks-quadrant-${task.quadrant}`).appendChild(taskElement);
                });
            });
        }

        // 新增任務
        document.getElementById('add-task-btn').addEventListener('click', () => {
            const taskName = prompt("請輸入任務名稱:");
            const taskQuadrant = prompt("請輸入任務所屬象限（1-4）:");

            if (taskName && taskQuadrant >= 1 && taskQuadrant <= 4) {
                db.collection('tasks').add({
                    name: taskName,
                    quadrant: taskQuadrant
                }).then(() => {
                    displayTasks();
                });
            }
        });

        // 刪除任務
        function deleteTask(taskId) {
            db.collection('tasks').doc(taskId).delete().then(() => {
                displayTasks();
            });
        }

        // 清除所有任務
        document.getElementById('clear-all-btn').addEventListener('click', () => {
            db.collection("tasks").get().then((snapshot) => {
                snapshot.forEach((doc) => {
                    db.collection("tasks").doc(doc.id).delete();
                });
            }).then(() => {
                displayTasks();
            });
        });

        // 初始化時顯示任務
        displayTasks();
    </script>
</body>
</html>
